<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Guided Earth seasons tour showing day/night length and twilight across equinoxes and solstices." />
  <link rel="canonical" href="https://kwakib.netlify.app/earth-seasons.html" />
  <link rel="alternate" hreflang="en" href="https://kwakib.netlify.app/earth-seasons.html" />
  <link rel="alternate" hreflang="ar" href="https://kwakib.netlify.app/earth-seasons-ar.html" />
  <link rel="alternate" hreflang="x-default" href="https://kwakib.netlify.app/earth-seasons.html" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Earth Seasons Tour | Day/Night Through the Seasons" />
  <meta property="og:description" content="Guided Earth seasons tour showing day/night length and twilight across equinoxes and solstices." />
  <meta property="og:image" content="https://kwakib.netlify.app/2k_earth_daymap.jpg" />
  <meta property="og:url" content="https://kwakib.netlify.app/earth-seasons.html" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:site_name" content="Earth Seasons Tour" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Earth Seasons Tour | Day/Night Through the Seasons" />
  <meta name="twitter:description" content="Guided Earth seasons tour showing day/night length and twilight across equinoxes and solstices." />
  <meta name="twitter:image" content="https://kwakib.netlify.app/2k_earth_daymap.jpg" />
  <title>Earth Seasons Tour | Day/Night Through the Seasons</title>
  <script>window.FORCED_LANG='en'; window.FORCED_TOUR='seasons'; window.SINGLE_POINT=true; window.PAGE_LANG_MAP={en:'earth-seasons.html', ar:'earth-seasons-ar.html'};</script>
  <script type="application/ld+json">

    {

      "@context": "https://schema.org",

      "@type": "BreadcrumbList",

      "itemListElement": [

        {

          "@type": "ListItem",

          "position": 1,

          "name": "Home",

          "item": "https://kwakib.netlify.app/"

        },

        {

          "@type": "ListItem",

          "position": 2,

          "name": "Earth Seasons Tour",

          "item": "https://kwakib.netlify.app/earth-seasons.html"

        }

      ]

    }

  </script>
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "url": "https://kwakib.netlify.app/earth-seasons.html",
      "name": "Earth Seasons Tour | Day/Night Through the Seasons",
      "inLanguage": "en",
      "description": "Guided Earth seasons tour showing day/night length and twilight across equinoxes and solstices.",
      "isPartOf": {
        "@type": "WebSite",
        "url": "https://kwakib.netlify.app/",
        "name": "Qibla Earth Simulator"
      }
    }
  </script>
  <link rel="stylesheet" href="viewerBase.css" />
  <link rel="stylesheet" href="earthViewer.css" />
<script id="earthCopy" type="application/json">
  {
    "metricsRouteLabel": "A-B",
    "metricsDistanceLabel": "Distance ({route})",
    "metricsHeadingLabel": "Initial heading ({route})",
    "durationsPrompt": "Select a point to see day/night duration.",
    "pointLabelSingle": "Point",
    "pointLabelA": "Point A",
    "pointLabelB": "Point B",
    "labelDay": "Day",
    "labelNight": "Night",
    "labelMoonUp": "Moon up",
    "durationsSummary": "At your point: Day {day}, Night {night}",
    "hoverLabel": "Hover: lat {lat}, lon {lon}",
    "noonUnchanged": "unchanged",
    "noonEarlier": "{value} earlier",
    "noonLater": "{value} later",
    "analemmaCumulativeLabel": "Cumulative: {value}",
    "analemmaDailyDifference": "Daily difference: {value}",
    "eotShortLabel": "EoT",
    "analemmaEotValue": "{label} = {value}",
    "analemmaInspectorEcc": "Ecc {value}",
    "analemmaInspectorObliq": "Compression factor {value}",
    "analemmaInspectorCombined": "Daily difference = {mean} - ({mean} {ecc}) * {compression} = {diff} ({diffSeconds})",
    "tooltipDate": "Date: {value}",
    "tooltipExtraAngle": "Extra angle: {value}",
    "tooltipDeltaMean": "Delta vs mean: {value}",
    "tooltipTiltFactor": "Tilt factor: {value}",
    "eotChartTitle": "Equation of time",
    "chartMinutesUnit": "min",
    "chartTodayLabel": "Today",
    "insetDeltaLon": "Δlon {value}",
    "insetDeltaLat": "Δlat {value}",
    "insetRealSunLabel": "Real Sun λ",
    "timeAgo": "{value} ago",
    "timeIn": "in {value}",
    "eotHintEarlier": "apparent noon earlier",
    "eotHintLater": "apparent noon later",
    "eotHintMatches": "apparent noon matches",
    "eotSummary": "Equation of time: {value} ({hint})",
    "meridianRealLeads": "real Sun leads",
    "meridianMeanLeads": "mean Sun leads",
    "meridianAligned": "aligned",
    "meridianSummary": "Meridian: mean Sun {mean}, real Sun {real} (real - mean {delta}, {hint})",
    "meridianSummarySolarDay": "Meridian: mean Sun {mean}, real Sun {real} (real - mean {delta}, {hint}). Solar day ≈ {sidereal} + {extra} = {apparent} ({delta24} vs 24:00:00)",
    "seasonsInsetDaylight": "Daylight: {hours}",
    "seasonsInsetTwilightAngle": "Twilight duration (-{angle} deg): {hours}",
    "seasonsInsetTwilight": "Twilight duration: {hours}",
    "seasonsInsetLatYear": "Lat {lat} deg, {year}",
    "seasonsInsetHeading": "Today at this latitude",
    "seasonsInsetDayLabel": "Day",
    "seasonsInsetNightLabel": "Night",
    "seasonsInsetLocalSolarTime": "Local solar time: {hhmm}",
    "subsolarRealLabel": "Subsolar (real)",
    "subsolarMeanLabel": "Subsolar (mean)",
    "sublunarLabel": "Sublunar",
    "coordLatLabel": "lat",
    "coordLonLabel": "lon",
    "coordDegLabel": "deg",
    "tourStepProgress": "Step {current} / {total}",
    "tourPoiLocked": "POI locked: lat {lat}, lon {lon}",
    "tourPoiPrompt": "Pick a point to continue.",
    "tourPoiInvalid": "Enter a valid lat/lon first.",
    "tourPoiFirst": "Pick a point first.",
    "tour_seasons_title": "Day/night through the seasons",
    "tour_seasons_step0_title": "Pick a place",
    "tour_seasons_step0_body": "Click the globe (or enter lat/lon and press \"Use typed point\"). We will track how daylight changes here.",
    "tour_seasons_step1_title": "March equinox",
    "tour_seasons_step1_body": "Day and night are roughly equal everywhere. Your point should see ~12h daylight.",
    "tour_seasons_step2_title": "June solstice",
    "tour_seasons_step2_body": "Northern points enjoy longer days; southern points get shorter ones.",
    "tour_seasons_step3_title": "September equinox",
    "tour_seasons_step3_body": "Day and night balance again as the subsolar point crosses the equator.",
    "tour_seasons_step4_title": "December solstice",
    "tour_seasons_step4_body": "Southern summer / northern winter. Daylight flips from June.",
    "tour_analemma_title": "Analemma (equation of time)",
    "tour_analemma_step0_title": "Choose a point",
    "tour_analemma_step0_body": "Pick a site; we will compare the mean (reference) Sun with the apparent Sun at your meridian.",
    "tour_analemma_step1_title": "Baseline: mean noon",
    "tour_analemma_step1_body": "Start near the day when equation of time is ~0. At local noon the mean and real Sun align over your longitude. Inset: top compares mean vs real longitude over one sidereal day; bottom shows the real daily motion vector with longitude scaled by cos(dec).",
    "tour_analemma_step2_title": "Eccentricity (speed change)",
    "tour_analemma_step2_body": "Near perihelion in early January Earth moves faster, so the apparent Sun runs ahead of the mean Sun. Solar noon shifts earlier, stretching the analemma east-west.",
    "tour_analemma_step3_title": "Obliquity (tilt projection)",
    "tour_analemma_step3_body": "Around solstice the Sun is far north or south. Its daily motion tilts out of the equatorial plane, so the east-west component is compressed by cos(dec). This adds the vertical loop and another time offset.",
    "tour_analemma_step4_title": "Full-year trace",
    "tour_analemma_step4_body": "Hold mean noon fixed at your longitude and step through a full year. The real subsolar point traces the analemma as eccentricity and tilt combine.",
    "tour_analemma_step5_title": "Explore any date",
    "tour_analemma_step5_body": "Use the date/time input to jump anywhere; the inset and equation-of-time readout update for your longitude."
  }
  </script>
</head>
<body class="seasons-page">
  <h1 class="sr-only">Earth Seasons Tour</h1>
  <div id="scene"></div>
  <button id="toggleInfoBtn" class="floating-btn">Info</button>
  <button id="toggleControlsBtn" class="floating-btn">Controls</button>
  <div id="langSwitcher">
    <a id="langLinkEn" href="earth-seasons.html">English</a> |
    <a id="langLinkAr" href="earth-seasons-ar.html">العربية</a>
  </div>
  <div class="topic-select" aria-label="Earth topics">
    <label for="topicSelect">Earth topics</label>
        <select id="topicSelect">
      <option value="index.html">Earth overview</option>
      <option value="earth-seasons.html">Seasons tour</option>
      <option value="earth-analemma.html">Analemma tour</option>
      <option value="planets.html">Planets</option>
      <option value="venus.html">Venus visibility</option>
    </select>
  </div>
  <script type="module" src="topicSelect.js"></script>
  <div id="leftPanels">
    <div id="infoPanel">
      <h2 id="infoTitle">Earth Simulator</h2>
      <p id="infoIntro">Track how daylight and twilight shift through the year for a chosen location.</p>
      <ul>
        <li id="infoLi1">Plot a custom lat/lon point with a highlight ring.</li>
        <li id="infoLi2">Start the seasons tour to step through equinoxes and solstices.</li>
        <li id="infoLi3">Watch day/night and twilight durations update for your point.</li>
        <li id="infoLi4">Inspect subsolar and sublunar points with day/night overlays.</li>
        <li id="infoLi5">Toggle night/Moon overlays and view numeric subpoint readouts.</li>
        <li id="infoLi6">Adjust twilight bands with a sun-below-horizon angle.</li>
        <li id="infoLi7">Use sun-sync or terminator camera modes for context.</li>
      </ul>
      <div class="faq-block">
        <h4 id="faqHeading">FAQ</h4>
        <div class="qa">
          <strong id="faqQ1">How do I explore day and night changes?</strong>
          <span id="faqA1">Start the seasons tour, pick a point, and step through equinoxes and solstices to see daylight and twilight update.</span>
        </div>
        <div class="qa">
          <strong id="faqQ2">What does the seasons inset show?</strong>
          <span id="faqA2">It charts daylight and twilight duration through the year for your latitude and highlights today.</span>
        </div>
        <div class="qa">
          <strong id="faqQ3">Can I toggle overlays?</strong>
          <span id="faqA3">Use Twilight Band to set the horizon offset and the Night visibility checkbox to enable/disable the night overlay.</span>
        </div>
      </div>
    </div>
    <div class="section" id="tourSection">
      <h3 id="guidedTourHeading">Guided Tour</h3>
      <div id="tourMobileMsg" style="display:none; font-size:12px; color:#cfdcff;">Tours are available on desktop screens.</div>
      <div id="tourDesktopControls">
        <button id="startTourBtn">Day/Night through seasons</button>
        <button id="startAnalemmaBtn" style="margin-top:6px;">Analemma</button>
        <button id="useTypedPoiBtn" style="margin-top:6px;">Use typed point</button>
      </div>
      <div id="tourCard" class="tour-card" style="display:none;">
        <div id="tourStepTitle" class="tour-step-title"></div>
        <div id="tourStepBody" class="tour-step-body"></div>
        <div id="tourProgress" class="tour-progress"></div>
        <div id="tourPoiSummary" style="font-size:14px; color:#dce6ff; margin-bottom:6px;"></div>
        <div id="seasonsInsetBox" style="display:none; margin:8px 0 6px;">
          <canvas id="seasonsInset" width="520" height="420" style="width:100%; height:360px; border:1px solid rgba(42,137,255,0.35); border-radius:8px; background: rgba(10,16,26,0.45); display:block;"></canvas>
        </div>
        <div id="analemmaInsetBox" style="display:none; position:fixed; left:12px; top:12px; width:820px; max-width:calc(100vw - 24px); z-index:11; pointer-events:auto;">
          <canvas id="analemmaInset" width="800" height="500" style="width:800px; height:500px; border:1px solid rgba(42,137,255,0.35); border-radius:8px; background: rgba(10,16,26,0.45); display:block;"></canvas>
          <div style="font-size:12px; color:#8aa2d3; margin-top:4px;">Microscope inset: top = equation-of-time gap (mean vs real), bottom = real-sun daily velocity vector (sidereal day)</div>
        </div>
        <div class="row" style="gap:6px;">
          <button id="tourPrevBtn">Prev</button>
          <button id="tourNextBtn">Next</button>
          <button id="tourReplayBtn" class="tour-secondary">Replay step</button>
          <button id="tourExitBtn" class="tour-secondary">Exit tour</button>
        </div>
        <div id="tourAlert" class="tour-alert" style="display:none;"></div>
      </div>
    </div>
  </div>
  <div id="sidePanels">
    <div id="controls">
    <div class="section" title="Set UTC time; sidereal day steps shift subsolar longitude eastward (~360 deg / 23h56m).">
      <h3 id="timeAnimHeading">Time & Animation</h3>
      <label id="datetimeLabel">Date/Time (UTC)</label>
      <div class="row">
        <input id="datetime" type="text" style="flex:1; min-width: 0;" placeholder="YYYY-MM-DDTHH:MM" title="Format: YYYY-MM-DDTHH:MM" />
        <button id="resetNowBtn" title="Set to current UTC time">Now</button>
      </div>
      <div class="row" style="margin-top:6px;">
        <button id="siderealMinusBtn" title="Jump back 1 sidereal day (23h56m)">-1 sidereal day</button>
        <button id="siderealPlusBtn" title="Jump forward 1 sidereal day (23h56m)">+1 sidereal day</button>
      </div>
      <div class="row" style="margin-top:6px;">
        <button class="timeStep" data-unit="day" data-delta="-1">-1 day</button>
        <button class="timeStep" data-unit="day" data-delta="1">+1 day</button>
        <button class="timeStep" data-unit="hour" data-delta="-1">-1 hr</button>
        <button class="timeStep" data-unit="hour" data-delta="1">+1 hr</button>
        <button class="timeStep" data-unit="minute" data-delta="-10">-10 min</button>
        <button class="timeStep" data-unit="minute" data-delta="10">+10 min</button>
      </div>
    </div>

    <div class="section">
      <h3 id="sunMoonHeading">Sun & Moon</h3>
      <label id="sunVisLabel"><input id="toggleSunVisibility" type="checkbox" checked /> <span id="sunVisText">Night visibility</span></label>
      <label id="moonVisLabel"><input id="toggleMoonVisibility" type="checkbox" checked /> <span id="moonVisText">Moon visibility</span></label>
    </div>

    <div class="section">
      <h3 id="cameraHeading">Camera</h3>
      <div class="segment-group" id="cameraSegments">
        <button data-mode="geo" class="active">Geosync</button>
        <button data-mode="sun">Sun-sync</button>
        <button data-mode="dawn">Dawn</button>
        <button data-mode="dusk">Dusk</button>
      </div>
    </div>

    <div class="section">
      <h3 id="twilightHeading">Twilight Band</h3>
      <label class="row inputs-inline" style="margin-top:2px; align-items:flex-start; gap:10px;">
        <span id="twilightLimitLabel" style="min-width:130px;">Twilight limit (deg below horizon):</span>
        <div style="display:flex; flex-direction:column; gap:4px; width:100%;">
          <input id="twilightAngle" type="range" min="0" max="18" step="0.5" value="18" />
          <span id="twilightValue" style="font-size:12px; color:#cfdcff;">18 deg</span>
        </div>
      </label>
    </div>

    <div class="section">
      <h3 id="pointsHeading">Points</h3>
      <label id="pointALabel">Point (lat, lon) <span style="color:#ff6699;">&bull;</span></label>
      <div class="row inputs-inline">
        <input id="lat1" type="number" step="0.1" />
        <input id="lon1" type="number" step="0.1" />
      </div>
      <div class="row" style="margin-top:6px;">
        <button id="plotBtn">Plot point</button>
        <button id="clearPointsBtn" style="background:#444a5a;">Clear</button>
      </div>
    </div>

  </div>
  <div id="dataPanel">
    <h3 id="dataHeading">Sun & Moon Data</h3>
    <div id="subpoints" style="font-size:12px; line-height:1.4;"></div>
    <div id="durations" style="font-size:12px; line-height:1.4; margin-top:6px; color:#cfdcff;"></div>
    <div id="pointMetrics" style="font-size:12px; line-height:1.4; margin-top:6px; color:#cfdcff;"></div>
    <div id="hoverBox" style="font-size:12px; line-height:1.4; margin-top:6px; color:#cfdcff;">
      <div id="hoverLabel"></div>
    </div>
  </div>
  </div>
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.module.js",
        "three/examples/jsm/": "https://cdn.jsdelivr.net/npm/three@0.155.0/examples/jsm/"
      }
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/astronomy.browser.js"></script>

  <script type="module" src="earthViewer.js"></script>
  <footer>
    Texture map credit: <a href="https://www.solarsystemscope.com/textures/" target="_blank" rel="noopener">Solar System Scope</a>
    <div style="margin-top:4px;">Questions/feedback: <a href="mailto:qibla-site@proton.me">qibla-site@proton.me</a></div>
  </footer>
</body>
</html>





